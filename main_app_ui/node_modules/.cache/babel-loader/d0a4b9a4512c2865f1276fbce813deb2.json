{"ast":null,"code":"import _slicedToArray from\"Q:/app_django_react_v01/main_app_ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import{MainContainer}from\"./components/MainContainer\";import axios from\"axios\";import Typography from\"@material-ui/core/Typography\";import{Button,MuiThemeProvider,TableContainer}from\"@material-ui/core\";import Table from\"@material-ui/core/Table\";import TableHead from\"@material-ui/core/TableHead\";import TableRow from\"@material-ui/core/TableRow\";import TableCell from\"@material-ui/core/TableCell\";import TableBody from\"@material-ui/core/TableBody\";import makeStyles from\"@material-ui/core/styles/makeStyles\";import{useHistory}from\"react-router-dom\";import{DeleteForeverOutlined}from'@material-ui/icons';import{Form}from\"./components/Form\";import{PrimaryButton}from\"./components/PrimaryButton\";import ReactFancyBox from\"react-fancybox\";import thubnail from'./thubnail.png';import thumb2 from'./thumb2.png';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var useStyles=makeStyles(function(theme){return{root:{marginBottom:\"30px\",textAlign:\"center\",width:'auto',minWidth:0},table:{marginBottom:\"30px\"},head:{backgroundColor:\"orange\",color:'white'},button:{color:'darkmagenta'}};});export var Main=function Main(){var history=useHistory();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var myStyle=useStyles();var onSubmit=function onSubmit(){history.push('/step1');};// const showFull = () => {\n//     console.log('clicked on image')\n//     // console.log(e.target.className)\n//     let element = document.getElementById('image');\n//     const myElementClone = element.cloneNode()\n//     myElementClone.onClick = function onClick(event) {\n//         console.log(event.type + ' got fired')\n//         document.getElementById('root').removeChild(myElementClone)\n//     }\n//     document.getElementById('root').appendChild(myElementClone)\n//     if (myElementClone.className === \"normal\") {\n//         myElementClone.className = \"rotate\";\n//     }\n//     // else if (element.className === \"rotate\") {\n//         // document.getElementById('root').removeChild(myElementClone)\n//     // }\n// }\nvar res=useEffect(function(){axios({method:\"GET\",url:\"http://127.0.0.1:8000/api/card/\"}).then(function(response){var _response$data;console.log('check response');console.log(response);console.log(response.data);setData((_response$data=response.data)!==null&&_response$data!==void 0?_response$data:[]);// setData(response.data.results ?? [])\n});},[]);var deleteCard=function deleteCard(id){axios({method:\"DELETE\",url:\"http://127.0.0.1:8000/api/card/\".concat(id,\"/\")}).then(function(resp){console.log(resp);axios({method:\"GET\",url:\"http://127.0.0.1:8000/api/card/\"}).then(function(response){var _response$data2;console.log('check response');console.log(response);console.log(response.data);setData((_response$data2=response.data)!==null&&_response$data2!==void 0?_response$data2:[]);// setData(response.data.results ?? [])\n});});};return/*#__PURE__*/_jsxs(MainContainer,{children:[/*#__PURE__*/_jsx(Typography,{component:'h2',variant:'h5',children:\"All user cards \\uD83E\\uDD73\\uD83C\\uDF83\"}),/*#__PURE__*/_jsx(MuiThemeProvider,{className:myStyle.root,children:/*#__PURE__*/_jsx(TableContainer,{className:myStyle.root,component:\"div\",children:/*#__PURE__*/_jsxs(Table,{className:myStyle.table,children:[/*#__PURE__*/_jsx(TableHead,{children:/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:\"Name\"}),/*#__PURE__*/_jsx(TableCell,{align:'right',children:\"Last Name\"}),/*#__PURE__*/_jsx(TableCell,{children:\"E-mail\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Phone\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Preview\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Delete\"})]})}),/*#__PURE__*/_jsx(TableBody,{children:data.map(function(p){var _p$phoneNumber;return/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:p.firstName}),/*#__PURE__*/_jsx(TableCell,{children:p.lastName}),/*#__PURE__*/_jsx(TableCell,{children:/*#__PURE__*/_jsx(\"a\",{href:\"mailto:\".concat(p.email),children:p.email})}),/*#__PURE__*/_jsx(TableCell,{align:'right',children:/*#__PURE__*/_jsx(\"a\",{href:\"tel:{p.phoneNumber?.toString()}\",className:\"Phonny\",children:(_p$phoneNumber=p.phoneNumber)===null||_p$phoneNumber===void 0?void 0:_p$phoneNumber.toString()})}),/*#__PURE__*/_jsx(TableCell,{children:/*#__PURE__*/_jsx(ReactFancyBox,{id:\"gallery\",class:\"fancybox1\",thumbnail:p===null||p===void 0?void 0:p.thumb,image:p.files})}),/*#__PURE__*/_jsx(TableCell,{children:/*#__PURE__*/_jsx(Button,{type:'submit',onClick:function onClick(){return deleteCard(p.id);},className:myStyle.button,fullHeigth:true,color:\"secondary\",startIcon:/*#__PURE__*/_jsx(DeleteForeverOutlined,{fontSize:\"small\"})})})]},p.id);})})]})})}),/*#__PURE__*/_jsx(Form,{onClick:onSubmit,children:/*#__PURE__*/_jsx(PrimaryButton,{children:\"Add user card\"})})]});};","map":{"version":3,"sources":["Q:/app_django_react_v01/main_app_ui/src/Main.js"],"names":["React","useEffect","useState","MainContainer","axios","Typography","Button","MuiThemeProvider","TableContainer","Table","TableHead","TableRow","TableCell","TableBody","makeStyles","useHistory","DeleteForeverOutlined","Form","PrimaryButton","ReactFancyBox","thubnail","thumb2","useStyles","theme","root","marginBottom","textAlign","width","minWidth","table","head","backgroundColor","color","button","Main","history","data","setData","myStyle","onSubmit","push","res","method","url","then","response","console","log","deleteCard","id","resp","map","p","firstName","lastName","email","phoneNumber","toString","thumb","files"],"mappings":"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","sourcesContent":["import React, {useEffect, useState} from \"react\";\r\nimport {MainContainer} from \"./components/MainContainer\";\r\nimport axios from \"axios\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport {Button, MuiThemeProvider, TableContainer} from \"@material-ui/core\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport makeStyles from \"@material-ui/core/styles/makeStyles\";\r\nimport {useHistory} from \"react-router-dom\";\r\nimport {DeleteForeverOutlined} from '@material-ui/icons';\r\nimport {Form} from \"./components/Form\";\r\nimport {PrimaryButton} from \"./components/PrimaryButton\";\r\nimport ReactFancyBox from \"react-fancybox\";\r\nimport thubnail from './thubnail.png';\r\nimport thumb2 from './thumb2.png'\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        marginBottom: \"30px\",\r\n        textAlign: \"center\",\r\n        width: 'auto',\r\n        minWidth: 0,\r\n    },\r\n    table: {\r\n        marginBottom: \"30px\"\r\n    },\r\n    head: {\r\n        backgroundColor: \"orange\",\r\n        color: 'white'\r\n    },\r\n    button: {\r\n        color: 'darkmagenta'\r\n    }\r\n}))\r\n\r\nexport const Main = () => {\r\n    const history = useHistory()\r\n    const [data, setData] = useState([])\r\n    const myStyle = useStyles()\r\n\r\n    const onSubmit = () => {\r\n        history.push('/step1')\r\n    }\r\n\r\n    // const showFull = () => {\r\n    //     console.log('clicked on image')\r\n    //     // console.log(e.target.className)\r\n    //     let element = document.getElementById('image');\r\n    //     const myElementClone = element.cloneNode()\r\n    //     myElementClone.onClick = function onClick(event) {\r\n    //         console.log(event.type + ' got fired')\r\n    //         document.getElementById('root').removeChild(myElementClone)\r\n    //     }\r\n    //     document.getElementById('root').appendChild(myElementClone)\r\n    //     if (myElementClone.className === \"normal\") {\r\n    //         myElementClone.className = \"rotate\";\r\n    //     }\r\n    //     // else if (element.className === \"rotate\") {\r\n    //         // document.getElementById('root').removeChild(myElementClone)\r\n    //     // }\r\n    // }\r\n\r\n\r\n    const res = useEffect(() => {\r\n        axios({\r\n            method: \"GET\",\r\n            url: \"http://127.0.0.1:8000/api/card/\"\r\n        }).then(response => {\r\n            console.log('check response')\r\n            console.log(response)\r\n            console.log(response.data)\r\n            setData(response.data ?? [])\r\n            // setData(response.data.results ?? [])\r\n        })\r\n    }, [])\r\n\r\n    const deleteCard = (id) => {\r\n        axios({\r\n            method: \"DELETE\",\r\n            url: `http://127.0.0.1:8000/api/card/${id}/`\r\n        }).then(resp => {\r\n            console.log(resp)\r\n            axios({\r\n                method: \"GET\",\r\n                url: \"http://127.0.0.1:8000/api/card/\"\r\n            }).then(response => {\r\n                console.log('check response')\r\n                console.log(response)\r\n                console.log(response.data)\r\n                setData(response.data ?? [])\r\n                // setData(response.data.results ?? [])\r\n            })\r\n        })\r\n\r\n    }\r\n\r\n    return (\r\n        <MainContainer>\r\n            <Typography component={'h2'} variant={'h5'}>\r\n                All user cards 🥳🎃\r\n            </Typography>\r\n            {/*<ul>*/}\r\n            {/*    { data && data.map(p => (*/}\r\n            {/*        <li key={p.id}>{p.firstName}--{p.email}</li>*/}\r\n            {/*    ))}*/}\r\n            {/*</ul>*/}\r\n            <MuiThemeProvider className={myStyle.root}>\r\n                <TableContainer className={myStyle.root} component={\"div\"}>\r\n                    <Table className={myStyle.table}>\r\n                        <TableHead>\r\n                            <TableRow>\r\n                                <TableCell>\r\n                                    Name\r\n                                </TableCell>\r\n                                <TableCell align={'right'}>\r\n                                    Last Name\r\n                                </TableCell>\r\n                                <TableCell>\r\n                                    E-mail\r\n                                </TableCell>\r\n                                <TableCell>\r\n                                    Phone\r\n                                </TableCell>\r\n                                <TableCell>\r\n                                    Preview\r\n                                </TableCell>\r\n                                <TableCell>\r\n                                    Delete\r\n                                </TableCell>\r\n                            </TableRow>\r\n                        </TableHead>\r\n                        <TableBody>\r\n                            {data.map(p => (\r\n                                <TableRow key={p.id}>\r\n                                    <TableCell>{p.firstName}</TableCell>\r\n                                    <TableCell>{p.lastName}</TableCell>\r\n                                    <TableCell><a href={`mailto:${p.email}`}>{p.email}</a></TableCell>\r\n                                    {/*<TableCell align={'right'}>{p.phoneNumber?.toString()}</TableCell>*/}\r\n                                    <TableCell align={'right'}><a href={`tel:{p.phoneNumber?.toString()}`}\r\n                                                                  className=\"Phonny\">\r\n                                        {p.phoneNumber?.toString()}\r\n                                    </a></TableCell>\r\n                                    <TableCell>\r\n                                        {/*<a href={p.files}><img src={p.files} width=\"24\" height=\"24\" alt=\"Атрибут юзера\" title={p.firstName+' '+p.lastName}/></a*/}\r\n                                        {/*<img src={p.files} width=\"240\" height=\"240\" id=\"image\"*/}\r\n                                        {/*     onClick={() => showFull()} className=\"normal\" alt=\"Атрибут юзера\"*/}\r\n                                        {/*     title={p.firstName + ' ' + p.lastName}/>*/}\r\n\r\n                                        {/*<ReactFancyBox id='gallery' class=\"fancybox1\" thumbnail={thumb2} image={p.files}/>*/}\r\n                                        <ReactFancyBox id='gallery' class=\"fancybox1\" thumbnail={p?.thumb} image={p.files}/>\r\n                                    </TableCell>\r\n                                    <TableCell>\r\n                                        <Button type={'submit'} onClick={() => deleteCard(p.id)}\r\n                                                className={myStyle.button} fullHeigth\r\n                                                color={\"secondary\"}\r\n                                                startIcon={<DeleteForeverOutlined fontSize=\"small\"/>}\r\n                                        />\r\n                                    </TableCell>\r\n                                </TableRow>\r\n                            ))}\r\n                        </TableBody>\r\n                    </Table>\r\n                </TableContainer>\r\n            </MuiThemeProvider>\r\n            <Form onClick={onSubmit}>\r\n                <PrimaryButton>Add user card</PrimaryButton>\r\n            </Form>\r\n        </MainContainer>\r\n    );\r\n}"]},"metadata":{},"sourceType":"module"}