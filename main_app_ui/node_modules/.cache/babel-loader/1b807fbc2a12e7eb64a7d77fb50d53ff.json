{"ast":null,"code":"var _jsxFileName = \"Q:\\\\app_django_react_v01\\\\main_app_ui\\\\src\\\\Main.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport { MainContainer } from \"./components/MainContainer\";\nimport axios from \"axios\";\nimport Typography from \"@material-ui/core/Typography\";\nimport { Button, MuiThemeProvider, TableContainer } from \"@material-ui/core\";\nimport Table from \"@material-ui/core/Table\";\nimport TableHead from \"@material-ui/core/TableHead\";\nimport TableRow from \"@material-ui/core/TableRow\";\nimport TableCell from \"@material-ui/core/TableCell\";\nimport TableBody from \"@material-ui/core/TableBody\";\nimport makeStyles from \"@material-ui/core/styles/makeStyles\";\nimport { useHistory } from \"react-router-dom\";\nimport { DeleteForeverOutlined } from '@material-ui/icons';\nimport { Form } from \"./components/Form\";\nimport { PrimaryButton } from \"./components/PrimaryButton\";\nimport ReactFancyBox from \"react-fancybox\";\nimport thubnail from './thubnail.png';\nimport thumb2 from './thumb2.png';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst useStyles = makeStyles(theme => ({\n  root: {\n    marginBottom: \"30px\",\n    textAlign: \"center\",\n    width: 'auto',\n    minWidth: 0\n  },\n  table: {\n    marginBottom: \"30px\"\n  },\n  head: {\n    backgroundColor: \"orange\",\n    color: 'white'\n  }\n}));\n\nfunction getCookie(name) {\n  if (!document.cookie) {\n    return null;\n  }\n\n  const token = document.cookie.split(';').map(c => c.trim()).filter(c => c.startsWith(name + '='));\n\n  if (token.length === 0) {\n    return null;\n  }\n\n  return decodeURIComponent(token[0].split('=')[1]);\n}\n\nexport const Main = () => {\n  _s();\n\n  const history = useHistory();\n  const [datar, setData] = useState([]);\n  const myStyle = useStyles();\n\n  const onSubmit = () => {\n    history.push('/step1');\n  };\n\n  const data = [{\n    \"id\": 9,\n    \"firstName\": \"Vlad\",\n    \"lastName\": \"Test\",\n    \"email\": \"shatilovvlad@mail.ru\",\n    \"hasPhone\": false,\n    \"files\": \"http://127.0.0.1:8000/media/files/Vladundefined/2016-alison-brie-qhd-5120x2880.jpg\",\n    \"phoneNumber\": \"undefined\",\n    \"thumb\": \"http://127.0.0.1:8000/media/CACHE/images/files/Vladundefined/2016-alison-brie-qhd-5120x2880/99c11e751a09cdb82442baaf3697ed4a.jpg\"\n  }, {\n    \"id\": 7,\n    \"firstName\": \"Ozon\",\n    \"lastName\": \"Pepsi\",\n    \"email\": \"shatilovvlad@mail.ru\",\n    \"hasPhone\": false,\n    \"files\": \"http://127.0.0.1:8000/media/files/Ozon/1f3386d60dad.jpg\",\n    \"phoneNumber\": \"\",\n    \"thumb\": \"http://127.0.0.1:8000/media/CACHE/images/files/Ozon/1f3386d60dad/2ceb4cf57b129102ff37a2290824d2c5.jpg\"\n  }, {\n    \"id\": 2,\n    \"firstName\": \"Vlad\",\n    \"lastName\": \"Test\",\n    \"email\": \"shatilovvlad@mail.ru\",\n    \"hasPhone\": true,\n    \"files\": \"http://127.0.0.1:8000/media/files/Vlad9875168198/2fbc715a1e24e19b7c3ee8600e163eaf.jpg\",\n    \"phoneNumber\": \"79875168198\",\n    \"thumb\": \"http://127.0.0.1:8000/media/CACHE/images/files/Vlad9875168198/2fbc715a1e24e19b7c3ee8600e163eaf/e328d4048aea758b031b82491bbd6fc0.jpg\"\n  }]; // const showFull = () => {\n  //     console.log('clicked on image')\n  //     // console.log(e.target.className)\n  //     let element = document.getElementById('image');\n  //     const myElementClone = element.cloneNode()\n  //     myElementClone.onClick = function onClick(event) {\n  //         console.log(event.type + ' got fired')\n  //         document.getElementById('root').removeChild(myElementClone)\n  //     }\n  //     document.getElementById('root').appendChild(myElementClone)\n  //     if (myElementClone.className === \"normal\") {\n  //         myElementClone.className = \"rotate\";\n  //     }\n  //     // else if (element.className === \"rotate\") {\n  //         // document.getElementById('root').removeChild(myElementClone)\n  //     // }\n  // }\n\n  const res = useEffect(() => {\n    axios({\n      method: \"GET\",\n      url: \"http://127.0.0.1:8000/api/card/\"\n    }).then(response => {\n      var _response$data;\n\n      console.log('check response');\n      console.log(response);\n      console.log(response.data);\n      setData((_response$data = response.data) !== null && _response$data !== void 0 ? _response$data : []); // setData(response.data.results ?? [])\n    });\n  }, []);\n  const csrftoken = getCookie('csrftoken');\n\n  const deleteCard = id => {\n    axios({\n      method: \"DELETE\",\n      headers: {\n        'X-CSRFToken': csrftoken\n      },\n      url: `http://127.0.0.1:8000/api/card/${id}/`\n    }).then(resp => {\n      console.log(resp);\n      axios({\n        method: \"GET\",\n        url: \"http://127.0.0.1:8000/api/card/\"\n      }).then(response => {\n        var _response$data2;\n\n        console.log('check response');\n        console.log(response);\n        console.log(response.data);\n        setData((_response$data2 = response.data) !== null && _response$data2 !== void 0 ? _response$data2 : []); // setData(response.data.results ?? [])\n      });\n    });\n  }; // <a href=\"https://example.com\" target=\"_blank\" rel=\"noreferrer noopener\" />\n\n\n  return /*#__PURE__*/_jsxDEV(MainContainer, {\n    className: 'container',\n    children: [/*#__PURE__*/_jsxDEV(Typography, {\n      component: 'h2',\n      variant: 'h5',\n      children: \"All user cards \\uD83E\\uDD73\\uD83C\\uDF83\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(MuiThemeProvider, {\n      className: myStyle.root,\n      children: /*#__PURE__*/_jsxDEV(TableContainer, {\n        className: myStyle.root,\n        component: \"div\",\n        children: /*#__PURE__*/_jsxDEV(Table, {\n          className: myStyle.table,\n          children: [/*#__PURE__*/_jsxDEV(TableHead, {\n            children: /*#__PURE__*/_jsxDEV(TableRow, {\n              children: [/*#__PURE__*/_jsxDEV(TableCell, {\n                children: \"Name\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 165,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                align: 'right',\n                children: \"Last Name\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 168,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                children: \"E-mail\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 171,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                children: \"Phone\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 174,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                children: \"Preview\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 177,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 164,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 163,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(TableBody, {\n            children: data.map(p => {\n              var _p$phoneNumber;\n\n              return /*#__PURE__*/_jsxDEV(TableRow, {\n                children: [/*#__PURE__*/_jsxDEV(TableCell, {\n                  children: p.firstName\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 188,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                  children: p.lastName\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 189,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                  children: /*#__PURE__*/_jsxDEV(\"a\", {\n                    href: `mailto:${p.email}`,\n                    children: p.email\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 190,\n                    columnNumber: 48\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 190,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                  align: 'right',\n                  children: /*#__PURE__*/_jsxDEV(\"a\", {\n                    href: `tel:{p.phoneNumber?.toString()}`,\n                    className: \"Phonny\",\n                    children: (_p$phoneNumber = p.phoneNumber) === null || _p$phoneNumber === void 0 ? void 0 : _p$phoneNumber.toString()\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 192,\n                    columnNumber: 64\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 192,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                  children: /*#__PURE__*/_jsxDEV(ReactFancyBox, {\n                    id: \"gallery\",\n                    class: \"fancybox1\",\n                    thumbnail: p === null || p === void 0 ? void 0 : p.thumb,\n                    image: p === null || p === void 0 ? void 0 : p.files\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 203,\n                    columnNumber: 41\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 196,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(Button, {\n                  type: 'submit',\n                  onClick: () => deleteCard(p.id),\n                  className: `button__div ${myStyle.button}`,\n                  fullHeigth: true // className={\"button__div\"} fullHeigth\n                  ,\n                  color: \"secondary\",\n                  startIcon: /*#__PURE__*/_jsxDEV(DeleteForeverOutlined, {\n                    className: 'button__icon',\n                    fontSize: \"small\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 211,\n                    columnNumber: 60\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 207,\n                  columnNumber: 41\n                }, this)]\n              }, p.id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 187,\n                columnNumber: 33\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 185,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Form, {\n      onClick: onSubmit,\n      children: /*#__PURE__*/_jsxDEV(PrimaryButton, {\n        children: \"Add user card\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 151,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Main, \"tIOdwpMpU5UNsYlNacV7554vcH8=\", false, function () {\n  return [useHistory, useStyles];\n});\n\n_c = Main;\n\nvar _c;\n\n$RefreshReg$(_c, \"Main\");","map":{"version":3,"sources":["Q:/app_django_react_v01/main_app_ui/src/Main.js"],"names":["React","useEffect","useState","MainContainer","axios","Typography","Button","MuiThemeProvider","TableContainer","Table","TableHead","TableRow","TableCell","TableBody","makeStyles","useHistory","DeleteForeverOutlined","Form","PrimaryButton","ReactFancyBox","thubnail","thumb2","useStyles","theme","root","marginBottom","textAlign","width","minWidth","table","head","backgroundColor","color","getCookie","name","document","cookie","token","split","map","c","trim","filter","startsWith","length","decodeURIComponent","Main","history","datar","setData","myStyle","onSubmit","push","data","res","method","url","then","response","console","log","csrftoken","deleteCard","id","headers","resp","p","firstName","lastName","email","phoneNumber","toString","thumb","files","button"],"mappings":"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","sourcesContent":["import React, {useEffect, useState} from \"react\";\r\nimport {MainContainer} from \"./components/MainContainer\";\r\nimport axios from \"axios\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport {Button, MuiThemeProvider, TableContainer} from \"@material-ui/core\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport makeStyles from \"@material-ui/core/styles/makeStyles\";\r\nimport {useHistory} from \"react-router-dom\";\r\nimport {DeleteForeverOutlined} from '@material-ui/icons';\r\nimport {Form} from \"./components/Form\";\r\nimport {PrimaryButton} from \"./components/PrimaryButton\";\r\nimport ReactFancyBox from \"react-fancybox\";\r\nimport thubnail from './thubnail.png';\r\nimport thumb2 from './thumb2.png'\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        marginBottom: \"30px\",\r\n        textAlign: \"center\",\r\n        width: 'auto',\r\n        minWidth: 0,\r\n    },\r\n    table: {\r\n        marginBottom: \"30px\"\r\n    },\r\n    head: {\r\n        backgroundColor: \"orange\",\r\n        color: 'white'\r\n    }\r\n}))\r\n\r\nfunction getCookie(name) {\r\n    if (!document.cookie) {\r\n        return null;\r\n    }\r\n    const token = document.cookie.split(';')\r\n        .map(c => c.trim())\r\n        .filter(c => c.startsWith(name + '='));\r\n\r\n    if (token.length === 0) {\r\n        return null;\r\n    }\r\n    return decodeURIComponent(token[0].split('=')[1]);\r\n}\r\n\r\nexport const Main = () => {\r\n    const history = useHistory()\r\n    const [datar, setData] = useState([])\r\n    const myStyle = useStyles()\r\n\r\n    const onSubmit = () => {\r\n        history.push('/step1')\r\n    }\r\n    const data = [\r\n    {\r\n        \"id\": 9,\r\n        \"firstName\": \"Vlad\",\r\n        \"lastName\": \"Test\",\r\n        \"email\": \"shatilovvlad@mail.ru\",\r\n        \"hasPhone\": false,\r\n        \"files\": \"http://127.0.0.1:8000/media/files/Vladundefined/2016-alison-brie-qhd-5120x2880.jpg\",\r\n        \"phoneNumber\": \"undefined\",\r\n        \"thumb\": \"http://127.0.0.1:8000/media/CACHE/images/files/Vladundefined/2016-alison-brie-qhd-5120x2880/99c11e751a09cdb82442baaf3697ed4a.jpg\"\r\n    },\r\n    {\r\n        \"id\": 7,\r\n        \"firstName\": \"Ozon\",\r\n        \"lastName\": \"Pepsi\",\r\n        \"email\": \"shatilovvlad@mail.ru\",\r\n        \"hasPhone\": false,\r\n        \"files\": \"http://127.0.0.1:8000/media/files/Ozon/1f3386d60dad.jpg\",\r\n        \"phoneNumber\": \"\",\r\n        \"thumb\": \"http://127.0.0.1:8000/media/CACHE/images/files/Ozon/1f3386d60dad/2ceb4cf57b129102ff37a2290824d2c5.jpg\"\r\n    },\r\n    {\r\n        \"id\": 2,\r\n        \"firstName\": \"Vlad\",\r\n        \"lastName\": \"Test\",\r\n        \"email\": \"shatilovvlad@mail.ru\",\r\n        \"hasPhone\": true,\r\n        \"files\": \"http://127.0.0.1:8000/media/files/Vlad9875168198/2fbc715a1e24e19b7c3ee8600e163eaf.jpg\",\r\n        \"phoneNumber\": \"79875168198\",\r\n        \"thumb\": \"http://127.0.0.1:8000/media/CACHE/images/files/Vlad9875168198/2fbc715a1e24e19b7c3ee8600e163eaf/e328d4048aea758b031b82491bbd6fc0.jpg\"\r\n    }\r\n]\r\n\r\n    // const showFull = () => {\r\n    //     console.log('clicked on image')\r\n    //     // console.log(e.target.className)\r\n    //     let element = document.getElementById('image');\r\n    //     const myElementClone = element.cloneNode()\r\n    //     myElementClone.onClick = function onClick(event) {\r\n    //         console.log(event.type + ' got fired')\r\n    //         document.getElementById('root').removeChild(myElementClone)\r\n    //     }\r\n    //     document.getElementById('root').appendChild(myElementClone)\r\n    //     if (myElementClone.className === \"normal\") {\r\n    //         myElementClone.className = \"rotate\";\r\n    //     }\r\n    //     // else if (element.className === \"rotate\") {\r\n    //         // document.getElementById('root').removeChild(myElementClone)\r\n    //     // }\r\n    // }\r\n\r\n\r\n    const res = useEffect(() => {\r\n        axios({\r\n            method: \"GET\",\r\n            url: \"http://127.0.0.1:8000/api/card/\"\r\n        }).then(response => {\r\n            console.log('check response')\r\n            console.log(response)\r\n            console.log(response.data)\r\n            setData(response.data ?? [])\r\n            // setData(response.data.results ?? [])\r\n        })\r\n    }, [])\r\n\r\n    const csrftoken = getCookie('csrftoken')\r\n\r\n    const deleteCard = (id) => {\r\n        axios({\r\n            method: \"DELETE\",\r\n            headers: {\r\n                'X-CSRFToken': csrftoken\r\n            },\r\n            url: `http://127.0.0.1:8000/api/card/${id}/`\r\n        }).then(resp => {\r\n            console.log(resp)\r\n            axios({\r\n                method: \"GET\",\r\n                url: \"http://127.0.0.1:8000/api/card/\"\r\n            }).then(response => {\r\n                console.log('check response')\r\n                console.log(response)\r\n                console.log(response.data)\r\n                setData(response.data ?? [])\r\n                // setData(response.data.results ?? [])\r\n            })\r\n        })\r\n\r\n    }\r\n    // <a href=\"https://example.com\" target=\"_blank\" rel=\"noreferrer noopener\" />\r\n\r\n    return (\r\n        <MainContainer className={'container'}>\r\n            <Typography component={'h2'} variant={'h5'}>\r\n                All user cards 🥳🎃\r\n            </Typography>\r\n            {/*<ul>*/}\r\n            {/*    { data && data.map(p => (*/}\r\n            {/*        <li key={p.id}>{p.firstName}--{p.email}</li>*/}\r\n            {/*    ))}*/}\r\n            {/*</ul>*/}\r\n            <MuiThemeProvider className={myStyle.root}>\r\n                <TableContainer className={myStyle.root} component={\"div\"}>\r\n                    <Table className={myStyle.table}>\r\n                        <TableHead>\r\n                            <TableRow>\r\n                                <TableCell>\r\n                                    Name\r\n                                </TableCell>\r\n                                <TableCell align={'right'}>\r\n                                    Last Name\r\n                                </TableCell>\r\n                                <TableCell>\r\n                                    E-mail\r\n                                </TableCell>\r\n                                <TableCell>\r\n                                    Phone\r\n                                </TableCell>\r\n                                <TableCell>\r\n                                    Preview\r\n                                </TableCell>\r\n                                {/*<TableCell>*/}\r\n                                {/*    Delete*/}\r\n                                {/*</TableCell>*/}\r\n                            </TableRow>\r\n                        </TableHead>\r\n                        <TableBody>\r\n                            {data.map(p => (\r\n                                <TableRow key={p.id}>\r\n                                    <TableCell>{p.firstName}</TableCell>\r\n                                    <TableCell>{p.lastName}</TableCell>\r\n                                    <TableCell><a href={`mailto:${p.email}`}>{p.email}</a></TableCell>\r\n                                    {/*<TableCell align={'right'}>{p.phoneNumber?.toString()}</TableCell>*/}\r\n                                    <TableCell align={'right'}><a href={`tel:{p.phoneNumber?.toString()}`}\r\n                                                                  className=\"Phonny\">\r\n                                        {p.phoneNumber?.toString()}\r\n                                    </a></TableCell>\r\n                                    <TableCell>\r\n                                        {/*<a href={p.files}><img src={p.files} width=\"24\" height=\"24\" alt=\"Атрибут юзера\" title={p.firstName+' '+p.lastName}/></a*/}\r\n                                        {/*<img src={p.files} width=\"240\" height=\"240\" id=\"image\"*/}\r\n                                        {/*     onClick={() => showFull()} className=\"normal\" alt=\"Атрибут юзера\"*/}\r\n                                        {/*     title={p.firstName + ' ' + p.lastName}/>*/}\r\n\r\n                                        {/*<ReactFancyBox id='gallery' class=\"fancybox1\" thumbnail={thumb2} image={p.files}/>*/}\r\n                                        <ReactFancyBox id='gallery' class=\"fancybox1\" thumbnail={p?.thumb} image={p?.files}/>\r\n                                        {/*<ReactFancyBox id='gallery' class=\"fancybox1\" thumbnail={p?.images?.thumb} image={p?.images?.image}/>*/}\r\n                                    </TableCell>\r\n                                    {/*<TableCell>*/}\r\n                                        <Button type={'submit'} onClick={() => deleteCard(p.id)}\r\n                                                className={`button__div ${myStyle.button}`} fullHeigth\r\n                                                // className={\"button__div\"} fullHeigth\r\n                                                color={\"secondary\"}\r\n                                                startIcon={<DeleteForeverOutlined className={'button__icon'} fontSize=\"small\"/>}\r\n                                        />\r\n                                    {/*</TableCell>*/}\r\n                                </TableRow>\r\n                            ))}\r\n                        </TableBody>\r\n                    </Table>\r\n                </TableContainer>\r\n            </MuiThemeProvider>\r\n            <Form onClick={onSubmit}>\r\n                <PrimaryButton>Add user card</PrimaryButton>\r\n            </Form>\r\n        </MainContainer>\r\n    );\r\n}"]},"metadata":{},"sourceType":"module"}