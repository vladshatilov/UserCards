{"ast":null,"code":"import _regeneratorRuntime from\"Q:/app_django_react_v01/main_app_ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"Q:/app_django_react_v01/main_app_ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"Q:/app_django_react_v01/main_app_ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import{MainContainer}from\"./components/MainContainer\";import Typography from\"@material-ui/core/Typography\";import{useData}from\"./DataContext\";import{makeStyles,MuiThemeProvider,TableContainer}from\"@material-ui/core\";import{Paper}from\"material-ui\";import TableHead from\"@material-ui/core/TableHead\";import List from\"@material-ui/core/List\";import ListItem from\"@material-ui/core/ListItem\";import TableCell from\"@material-ui/core/TableCell\";import TableRow from\"@material-ui/core/TableRow\";import TableBody from\"@material-ui/core/TableBody\";import{Link}from\"react-router-dom\";import Table from\"@material-ui/core/Table\";import ListItemIcon from\"@material-ui/core/ListItemIcon\";import{InsertDriveFile}from\"@material-ui/icons\";import ListItemText from\"@material-ui/core/ListItemText\";import{PrimaryButton}from\"./components/PrimaryButton\";import Swal from'sweetalert2';import Confetti from\"react-confetti\";// import useWindowSize from 'react-use/lib/useWindowSize'\nimport axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var useStyles=makeStyles(function(theme){return{root:{marginBottom:\"30px\"},table:{marginBottom:\"30px\"}};});function getCookie(name){var cookieValue=null;if(document.cookie&&document.cookie!==''){var cookies=document.cookie.split(';');for(var i=0;i<cookies.length;i++){var cookie=jQuery.trim(cookies[i]);if(cookie.substring(0,name.length+1)===name+'='){cookieValue=decodeURIComponent(cookie.substring(name.length+1));break;}}}return cookieValue;}export var Result=function Result(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),success=_useState2[0],setSuccess=_useState2[1];var _useData=useData(),data=_useData.data;var entries=Object.entries(data).filter(function(entry){return entry[0]!=='files';});var files=data.files;var myStyle=useStyles();useEffect(function(){axios({method:\"GET\",url:\"http://127.0.0.1:8000/api/card\"}).then(function(response){console.log(\"response\",response.data);console.log(\"response\",response.cookies);});});var onSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var formData,csrftoken,try_post,res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:formData=new FormData();// const { width, height } = useWindowSize()\nSwal.fire(\"Great job!\",\"You've passed all data!\",\"success\");setSuccess(true);// if (data.files) {\n//     data.files.forEach(file => {\n//         formData.append(\"files\", file, file.name)\n//     })\n// }\n//\n// entries.forEach(entry => {\n//     formData.append(entry[0], entry[1])\n// })\n//\ncsrftoken=getCookie('csrftoken');try_post={firstName:\"Daddy\",lastName:'shatilov',email:'meme@corp.ru',hasPhone:true,phoneNumber:'+79123541268'};console.log('JSON');console.log(JSON.stringify(entries));console.log('try_post');console.log(JSON.stringify(try_post));console.log('formData');console.log(formData);_context.next=13;return fetch(\"http://127.0.0.1:8000/api/card/\",{method:\"POST\",body:JSON.stringify(try_post),headers:{'Content-Type':'application/json','Accept':'application/json','X-CSRFToken':csrftoken}}).then(function(resp){console.log(resp.status);console.log(resp.json());});case 13:res=_context.sent;case 14:case\"end\":return _context.stop();}}},_callee);}));return function onSubmit(){return _ref.apply(this,arguments);};}();// if (success) {\n//     console.log('here is confetti')\n//     return <Confetti />\n//     // width={\"500px\"}\n//     //                  height={\"300px\"}\n// }\nreturn/*#__PURE__*/_jsxs(MainContainer,{children:[/*#__PURE__*/_jsx(Typography,{component:'h2',variant:'h5',children:\"Form data \\uD83D\\uDC96\"}),/*#__PURE__*/_jsxs(MuiThemeProvider,{children:[/*#__PURE__*/_jsx(TableContainer,{className:myStyle.root,component:\"div\",children:/*#__PURE__*/_jsxs(Table,{className:myStyle.table,children:[/*#__PURE__*/_jsx(TableHead,{children:/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:\"Field\"}),/*#__PURE__*/_jsx(TableCell,{align:'right',children:\"Value\"})]})}),/*#__PURE__*/_jsx(TableBody,{children:entries.map(function(entry){var _entry$;return/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:entry[0]}),/*#__PURE__*/_jsx(TableCell,{align:'right',children:(_entry$=entry[1])===null||_entry$===void 0?void 0:_entry$.toString()})]},entry[0]);})})]})}),files&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Typography,{component:'h2',variant:'h5',children:\"Files \\uD83D\\uDC27\"}),/*#__PURE__*/_jsx(List,{children:files.map(function(f,index){return/*#__PURE__*/_jsxs(ListItem,{children:[/*#__PURE__*/_jsx(ListItemIcon,{children:/*#__PURE__*/_jsx(InsertDriveFile,{})}),/*#__PURE__*/_jsx(ListItemText,{primary:f.name,secondary:f.size})]},index);})})]})]}),/*#__PURE__*/_jsx(\"input\",{type:'submit',onClick:onSubmit}),/*#__PURE__*/_jsx(Link,{to:'/',children:\"To the start\"})]});};","map":{"version":3,"sources":["Q:/app_django_react_v01/main_app_ui/src/Result.js"],"names":["React","useEffect","useState","MainContainer","Typography","useData","makeStyles","MuiThemeProvider","TableContainer","Paper","TableHead","List","ListItem","TableCell","TableRow","TableBody","Link","Table","ListItemIcon","InsertDriveFile","ListItemText","PrimaryButton","Swal","Confetti","axios","useStyles","theme","root","marginBottom","table","getCookie","name","cookieValue","document","cookie","cookies","split","i","length","jQuery","trim","substring","decodeURIComponent","Result","success","setSuccess","data","entries","Object","filter","entry","files","myStyle","method","url","then","response","console","log","onSubmit","formData","FormData","fire","csrftoken","try_post","firstName","lastName","email","hasPhone","phoneNumber","JSON","stringify","fetch","body","headers","resp","status","json","res","map","toString","f","index","size"],"mappings":"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","sourcesContent":["import React, {useEffect, useState} from \"react\";\r\nimport {MainContainer} from \"./components/MainContainer\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport {useData} from \"./DataContext\";\r\nimport {makeStyles, MuiThemeProvider, TableContainer} from \"@material-ui/core\";\r\nimport {Paper} from \"material-ui\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport List from \"@material-ui/core/List\";\r\nimport ListItem from \"@material-ui/core/ListItem\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport {Link} from \"react-router-dom\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport ListItemIcon from \"@material-ui/core/ListItemIcon\";\r\nimport {InsertDriveFile} from \"@material-ui/icons\";\r\nimport ListItemText from \"@material-ui/core/ListItemText\";\r\nimport {PrimaryButton} from \"./components/PrimaryButton\";\r\nimport Swal from 'sweetalert2';\r\nimport Confetti from \"react-confetti\";\r\n// import useWindowSize from 'react-use/lib/useWindowSize'\r\nimport axios from \"axios\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        marginBottom: \"30px\"\r\n    },\r\n    table: {\r\n        marginBottom: \"30px\"\r\n    },\r\n}));\r\n\r\nfunction getCookie(name) {\r\n    let cookieValue = null;\r\n    if (document.cookie && document.cookie !== '') {\r\n        const cookies = document.cookie.split(';');\r\n        for (let i = 0; i < cookies.length; i++) {\r\n            const cookie = jQuery.trim(cookies[i]);\r\n            if (cookie.substring(0, name.length + 1) === (name + '=')) {\r\n                cookieValue = decodeURIComponent(cookie.substring(name.length + 1));\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    return cookieValue;\r\n}\r\n\r\nexport const Result = () => {\r\n    const [success, setSuccess] = useState(false);\r\n    const {data} = useData()\r\n    const entries = Object.entries(data).filter((entry) => entry[0] !== 'files')\r\n    const {files} = data;\r\n    const myStyle = useStyles()\r\n\r\n    useEffect(() => {\r\n            axios({\r\n                method: \"GET\",\r\n                url: \"http://127.0.0.1:8000/api/card\"\r\n            }).then(response => {\r\n                console.log(\"response\", response.data)\r\n                console.log(\"response\", response.cookies)\r\n            })\r\n        })\r\n\r\n    const onSubmit = async () => {\r\n        const formData = new FormData();\r\n        // const { width, height } = useWindowSize()\r\n        Swal.fire(\"Great job!\", \"You've passed all data!\", \"success\")\r\n        setSuccess(true)\r\n\r\n        // if (data.files) {\r\n        //     data.files.forEach(file => {\r\n        //         formData.append(\"files\", file, file.name)\r\n        //     })\r\n        // }\r\n        //\r\n        // entries.forEach(entry => {\r\n        //     formData.append(entry[0], entry[1])\r\n        // })\r\n        //\r\n        const csrftoken = getCookie('csrftoken');\r\n        const try_post = {\r\n            firstName: \"Daddy\",\r\n            lastName: 'shatilov',\r\n            email: 'meme@corp.ru',\r\n            hasPhone: true,\r\n            phoneNumber: '+79123541268'\r\n        }\r\n        console.log('JSON')\r\n        console.log(JSON.stringify(entries))\r\n        console.log('try_post')\r\n        console.log(JSON.stringify(try_post))\r\n        console.log('formData')\r\n        console.log(formData)\r\n\r\n        const res = await fetch(\"http://127.0.0.1:8000/api/card/\", {\r\n            method: \"POST\",\r\n            body: JSON.stringify(try_post),\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                'Accept': 'application/json',\r\n                'X-CSRFToken': csrftoken\r\n            }\r\n        }).then(resp => {\r\n            console.log(resp.status)\r\n            console.log(resp.json())\r\n        })\r\n        //\r\n        // if(res.status==200){\r\n        //     Swal.fire(\"Great job!\",\"You've passed all data\", \"success\")\r\n        // }\r\n\r\n\r\n//         let object = {};\r\n//         let formData2 = new FormData(document.forms.person);\r\n//\r\n//         formData2.forEach(function (value, key) {\r\n//             object[key] = value;\r\n//         });\r\n//         let json = JSON.stringify(object);\r\n//\r\n//         let xhr = new XMLHttpRequest();\r\n//         xhr.open(\"POST\", '/submit', true)\r\n//         xhr.setRequestHeader('Content-type', 'application/json; charset=utf-8');\r\n//\r\n// // Отсылаем объект в формате JSON и с Content-Type application/json\r\n//         xhr.send(json);\r\n\r\n    }\r\n    // if (success) {\r\n    //     console.log('here is confetti')\r\n    //     return <Confetti />\r\n    //     // width={\"500px\"}\r\n    //     //                  height={\"300px\"}\r\n    // }\r\n\r\n\r\n    return (\r\n        <MainContainer>\r\n            <Typography component={'h2'} variant={'h5'}>\r\n                Form data 💖\r\n            </Typography>\r\n            <MuiThemeProvider>\r\n                <TableContainer className={myStyle.root} component={\"div\"}>\r\n                    <Table className={myStyle.table}>\r\n                        <TableHead>\r\n                            <TableRow>\r\n                                <TableCell>\r\n                                    Field\r\n                                </TableCell>\r\n                                <TableCell align={'right'}>\r\n                                    Value\r\n                                </TableCell>\r\n                            </TableRow>\r\n                        </TableHead>\r\n                        <TableBody>\r\n                            {\r\n                                entries.map(entry => (\r\n                                    <TableRow key={entry[0]}>\r\n                                        <TableCell>{entry[0]}</TableCell>\r\n                                        <TableCell align={'right'}>{entry[1]?.toString()}</TableCell>\r\n                                    </TableRow>\r\n                                ))\r\n                            }\r\n                        </TableBody>\r\n                    </Table>\r\n                </TableContainer>\r\n                {\r\n                    files &&\r\n                    <>\r\n                        <Typography component={'h2'} variant={'h5'}>\r\n                            Files 🐧\r\n                        </Typography>\r\n                        <List>\r\n                            {\r\n                                files.map((f, index) => (\r\n                                    <ListItem key={index}>\r\n                                        <ListItemIcon>\r\n                                            <InsertDriveFile/>\r\n                                        </ListItemIcon>\r\n                                        <ListItemText primary={f.name} secondary={f.size}/>\r\n                                    </ListItem>\r\n                                ))\r\n                            }\r\n                        </List>\r\n                    </>\r\n                }\r\n            </MuiThemeProvider>\r\n            <input type={'submit'} onClick={onSubmit}/>\r\n            {/*<PrimaryButton onClick={onSubmit}>Submit</PrimaryButton>*/}\r\n            <Link to={'/'}>To the start</Link>\r\n        </MainContainer>\r\n    );\r\n}"]},"metadata":{},"sourceType":"module"}