{"ast":null,"code":"import _objectSpread from\"Q:/app_django_react_v01/main_app_ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import React,{useEffect,useState}from\"react\";import{MainContainer}from\"./components/MainContainer\";import Typography from\"@material-ui/core/Typography\";import{Form}from\"./components/Form\";import{FileInput}from\"./components/FileInput\";import{useForm}from\"react-hook-form\";import{PrimaryButton}from\"./components/PrimaryButton\";import{useHistory}from\"react-router-dom\";import{useData}from\"./DataContext\";import Dropzone,{useDropzone}from'react-dropzone';import{List,ListItem}from\"material-ui\";import{ListItemIcon,ListItemText}from\"@material-ui/core\";import{InsertDriveFile}from\"@material-ui/icons\";import MuiThemeProvider from\"material-ui/styles/MuiThemeProvider\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var Step3=function Step3(){var history=useHistory();var _useData=useData(),data=_useData.data,setValues=_useData.setValues;var _useForm=useForm({defaultValues:{files:data.files,imgData:data.imgData}}),register=_useForm.register,control=_useForm.control,handleSubmit=_useForm.handleSubmit;var onSubmit=function onSubmit(data){console.log(data);history.push('/result');// setValues(data)\n};var res=useEffect(function(){console.log(data);// console.log(files)\n},[data]);var res2=useEffect(function(){console.log(data);},[]);var MAX_SIZE=5242880;// const [imgData, setImgData] = useState(null);\n// const onChangePicture = (e) => {\n//     if (e.target.files[0]) {\n//         console.log(\"picture: \", e.target.files);\n//         // setPicture(e.target.files[0]);\n//         const reader = new FileReader();\n//         reader.addEventListener(\"load\", () => {\n//             setImgData(reader.result);\n//         });\n//         reader.readAsDataURL(e.target.files[0]);\n//     }\n// }\n// const res3 = useEffect(() => {\n//     console.log(imgData)\n// }, [imgData])\nreturn/*#__PURE__*/_jsxs(MainContainer,{children:[/*#__PURE__*/_jsx(Typography,{component:'h2',variant:'h5',children:\"Step three\\uD83E\\uDD14\"}),/*#__PURE__*/_jsxs(Form,{onSubmit:handleSubmit(onSubmit),children:[/*#__PURE__*/_jsx(Dropzone,{onDrop:function onDrop(acceptedFiles){setValues({files:acceptedFiles});acceptedFiles.forEach(function(file){var reader=new FileReader();reader.onabort=function(){return console.log('file reading was aborted');};reader.onerror=function(){return console.log('file reading has failed');};reader.onload=function(){// Do whatever you want with the file contents\n// setImgData(reader.result);\nsetValues({imgData:reader.result});var binaryStr=reader.result;// console.log(binaryStr)\n};reader.readAsDataURL(file);// reader.readAsArrayBuffer(file)\n});// onChangePicture(acceptedFiles);\n// const reader = new FileReader();\n// reader.readAsDataURL(acceptedFiles);\n//\n// reader.onloadend = () => {\n//     setImgData(reader.result);\n// }\n// setImgData(reader.readAsDataURL(acceptedFiles));\n// setImgData(acceptedFiles);\n// reader.addEventListener('load', () => {\n//     setImgData(reader.result);\n// })\n// setImgData();\n},multiple:false,accept:\"image/jpeg, image/png\",maxSize:MAX_SIZE,children:function children(_ref){var getRootProps=_ref.getRootProps,getInputProps=_ref.getInputProps;return/*#__PURE__*/_jsx(\"section\",{children:/*#__PURE__*/_jsxs(\"div\",_objectSpread(_objectSpread({},getRootProps()),{},{children:[/*#__PURE__*/_jsx(\"input\",_objectSpread({name:'files'},getInputProps())),/*#__PURE__*/_jsx(\"p\",{children:\"Drag 'n' drop some files here, or click to select files\"}),/*#__PURE__*/_jsx(\"em\",{children:\"(Only *.jpeg and *.png images will be accepted)\"})]}))});}}),/*#__PURE__*/_jsx(MuiThemeProvider,{children:/*#__PURE__*/_jsx(List,{children:data.files&&data.files.map(function(f,index){return/*#__PURE__*/_jsxs(ListItem,{children:[/*#__PURE__*/_jsx(ListItemIcon,{children:data.imgData&&/*#__PURE__*/_jsx(\"img\",{className:\"picture__preload\",width:\"200px\",src:data.imgData})}),/*#__PURE__*/_jsx(ListItemText,{className:\"list__text\",primary:f.name,secondary:f.size})]},index);})})}),/*#__PURE__*/_jsx(PrimaryButton,{children:\"Next\"})]})]});};","map":{"version":3,"sources":["Q:/app_django_react_v01/main_app_ui/src/Step3.js"],"names":["React","useEffect","useState","MainContainer","Typography","Form","FileInput","useForm","PrimaryButton","useHistory","useData","Dropzone","useDropzone","List","ListItem","ListItemIcon","ListItemText","InsertDriveFile","MuiThemeProvider","Step3","history","data","setValues","defaultValues","files","imgData","register","control","handleSubmit","onSubmit","console","log","push","res","res2","MAX_SIZE","acceptedFiles","forEach","file","reader","FileReader","onabort","onerror","onload","result","binaryStr","readAsDataURL","getRootProps","getInputProps","map","f","index","name","size"],"mappings":"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","sourcesContent":["import React, {useEffect, useState} from \"react\";\r\nimport {MainContainer} from \"./components/MainContainer\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport {Form} from \"./components/Form\";\r\nimport {FileInput} from \"./components/FileInput\";\r\nimport {useForm} from \"react-hook-form\";\r\nimport {PrimaryButton} from \"./components/PrimaryButton\";\r\nimport {useHistory} from \"react-router-dom\";\r\nimport {useData} from \"./DataContext\";\r\nimport Dropzone, {useDropzone} from 'react-dropzone';\r\nimport {List, ListItem} from \"material-ui\";\r\nimport {ListItemIcon, ListItemText} from \"@material-ui/core\";\r\nimport {InsertDriveFile} from \"@material-ui/icons\";\r\nimport MuiThemeProvider from \"material-ui/styles/MuiThemeProvider\";\r\n\r\nexport const Step3 = () => {\r\n    const history = useHistory()\r\n    const {data, setValues} = useData()\r\n    const {register, control, handleSubmit} = useForm({\r\n        defaultValues: {\r\n            files: data.files,\r\n            imgData: data.imgData\r\n        }\r\n    })\r\n\r\n    const onSubmit = (data) => {\r\n        console.log(data)\r\n        history.push('/result')\r\n        // setValues(data)\r\n    }\r\n\r\n    const res = useEffect(() => {\r\n        console.log(data)\r\n        // console.log(files)\r\n    }, [data])\r\n\r\n    const res2 = useEffect(() => {\r\n        console.log(data)\r\n    }, [])\r\n    const MAX_SIZE = 5242880;\r\n\r\n    // const [imgData, setImgData] = useState(null);\r\n    // const onChangePicture = (e) => {\r\n    //     if (e.target.files[0]) {\r\n    //         console.log(\"picture: \", e.target.files);\r\n    //         // setPicture(e.target.files[0]);\r\n    //         const reader = new FileReader();\r\n    //         reader.addEventListener(\"load\", () => {\r\n    //             setImgData(reader.result);\r\n    //         });\r\n    //         reader.readAsDataURL(e.target.files[0]);\r\n    //     }\r\n    // }\r\n\r\n    // const res3 = useEffect(() => {\r\n    //     console.log(imgData)\r\n    // }, [imgData])\r\n\r\n    return (\r\n        <MainContainer>\r\n            <Typography component={'h2'} variant={'h5'}>\r\n                Step three🤔\r\n            </Typography>\r\n            <Form onSubmit={handleSubmit(onSubmit)}>\r\n                {/*<FileInput name={'files'} control={control}/>*/}\r\n                <Dropzone onDrop={acceptedFiles => {\r\n                    setValues({\r\n                        files: acceptedFiles\r\n                    })\r\n\r\n                    acceptedFiles.forEach((file) => {\r\n                        const reader = new FileReader()\r\n\r\n                        reader.onabort = () => console.log('file reading was aborted')\r\n                        reader.onerror = () => console.log('file reading has failed')\r\n                        reader.onload = () => {\r\n                            // Do whatever you want with the file contents\r\n                            // setImgData(reader.result);\r\n                            setValues({\r\n                                imgData: reader.result\r\n                            })\r\n                            const binaryStr = reader.result\r\n                            // console.log(binaryStr)\r\n                        }\r\n                        reader.readAsDataURL(file)\r\n                        // reader.readAsArrayBuffer(file)\r\n                    })\r\n\r\n\r\n                    // onChangePicture(acceptedFiles);\r\n                    // const reader = new FileReader();\r\n                    // reader.readAsDataURL(acceptedFiles);\r\n                    //\r\n                    // reader.onloadend = () => {\r\n                    //     setImgData(reader.result);\r\n                    // }\r\n                    // setImgData(reader.readAsDataURL(acceptedFiles));\r\n                    // setImgData(acceptedFiles);\r\n                    // reader.addEventListener('load', () => {\r\n                    //     setImgData(reader.result);\r\n                    // })\r\n                    // setImgData();\r\n                }} multiple={false} accept=\"image/jpeg, image/png\" maxSize={MAX_SIZE}>\r\n                    {({getRootProps, getInputProps}) => (\r\n                        <section>\r\n                            <div {...getRootProps()}>\r\n                                <input name={'files'} {...getInputProps()} />\r\n                                <p>Drag 'n' drop some files here, or click to select files</p>\r\n                                <em>(Only *.jpeg and *.png images will be accepted)</em>\r\n                            </div>\r\n                        </section>\r\n                    )}\r\n                </Dropzone>\r\n                <MuiThemeProvider>\r\n                    <List>\r\n                        {/*<p>test check</p>*/}\r\n                        {\r\n                            data.files && data.files.map((f, index) => (\r\n                                <ListItem key={index}>\r\n                                    {/*<p>test check</p>*/}\r\n                                    <ListItemIcon>\r\n                                        {data.imgData && <img className=\"picture__preload\" width={\"200px\"} src={data.imgData}/>}\r\n                                        {/*<InsertDriveFile/>*/}\r\n                                    </ListItemIcon>\r\n                                    <ListItemText className={\"list__text\"} primary={f.name} secondary={f.size} />\r\n                                    {/*<img className=\"picture__preload\" src={imgData[0].path} />*/}\r\n                                </ListItem>\r\n                            ))\r\n                        }\r\n                    </List>\r\n                </MuiThemeProvider>\r\n                <PrimaryButton>Next</PrimaryButton>\r\n            </Form>\r\n        </MainContainer>\r\n    )\r\n}"]},"metadata":{},"sourceType":"module"}