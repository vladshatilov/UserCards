(this.webpackJsonpmain_app_ui=this.webpackJsonpmain_app_ui||[]).push([[0],{359:function(e,t,n){},701:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(15),i=n.n(r),o=(n(359),n(55)),s=n(26),l=n(156),d=n(729),j=n(3),u=Object(d.a)((function(e){return{root:{fontFamily:'"Pacifico"',margin:e.spacing(3,0,2),textAlign:"center",fontSize:"40px",color:"deeppink",textShadow:"1px 1px darkmagenta"}}})),h=function(){var e=u();return Object(j.jsx)(l.a,{className:e.root,component:"h1",variant:"h5",children:"Flawless and beautiful header"})},b=n(18),m=n(68),f=n(731),p=Object(d.a)((function(e){return{root:{marginTop:e.spacing(4),display:"flex",flexDirection:"column",alignItems:"center"}}})),O=function(e){var t=e.children,n=Object(m.a)(e,["children"]),a=p();return Object(j.jsx)(f.a,Object(b.a)(Object(b.a)({className:a.root,container:"main",maxWidth:"xs"},n),{},{children:t}))},x=Object(d.a)((function(e){return{root:{width:"100%",marginTop:e.spacing(1)}}})),g=function(e){var t=e.children,n=Object(m.a)(e,["children"]),a=x();return Object(j.jsx)("form",Object(b.a)(Object(b.a)({className:a.root,noValidate:!0},n),{},{children:t}))},v=n(747),N=Object(a.forwardRef)((function(e,t){return Object(j.jsx)(v.a,Object(b.a)({variant:"outlined",margin:"normal",inputRef:t,fullWidth:!0},e))})),S=n(41),y=n(733),k=Object(d.a)((function(e){return{root:{margin:e.spacing(3,0,2)}}})),C=function(e){var t=e.children,n=Object(m.a)(e,["children"]),a=k();return Object(j.jsx)(y.a,Object(b.a)(Object(b.a)({className:a.root,type:"submit",fullWidth:!0,variant:"contained",color:"primary"},n),{},{children:t}))},E=n(81),D=n(155),P=n(24),T=Object(a.createContext)(),F=function(e){var t=e.children,n=Object(a.useState)({}),c=Object(P.a)(n,2),r=c[0],i=c[1];return Object(j.jsx)(T.Provider,{value:{data:r,setValues:function(e){i((function(t){return Object(b.a)(Object(b.a)({},t),e)}))}},children:t})},w=function(){return Object(a.useContext)(T)},V=E.a().shape({firstName:E.b().matches(/^([^0-9]*)$/,"First name should not contain numbers").required("First name is required"),lastName:E.b().matches(/^([^0-9]*)$/,"Last name should not contain numbers").required("Last name is required")}),_=function(){var e,t,n=Object(s.f)(),a=w(),c=a.data,r=a.setValues,i=Object(S.e)({defaultValues:{firstName:c.firstName,lastName:c.lastName},mode:"onBlur",resolver:Object(D.a)(V)}),o=i.register,d=i.handleSubmit,u=i.formState.errors;return Object(j.jsxs)(O,{children:[Object(j.jsx)(l.a,{component:"h2",variant:"h5",children:"Step one\ud83d\udd25"}),Object(j.jsxs)(g,{onSubmit:d((function(e){console.log(e),console.log(u.name),n.push("/step2"),r(e)})),children:[Object(j.jsx)(N,Object(b.a)(Object(b.a)({},o("firstName",{required:!0,maxLength:30})),{},{id:"firstName",type:"text",autoFocus:!0,label:"First Name",error:!!u.firstName,helperText:null===u||void 0===u||null===(e=u.firstName)||void 0===e?void 0:e.message})),Object(j.jsx)(N,Object(b.a)(Object(b.a)({},o("lastName",{required:!0,maxLength:30})),{},{id:"lastName",type:"text",label:"Last Name",error:!!u.lastName,helperText:null===u||void 0===u||null===(t=u.lastName)||void 0===t?void 0:t.message})),Object(j.jsx)(C,{children:"Next step"})]})]})},q=n(748),L=E.a().shape({email:E.b().email("Email should have correct format").required("This is required")}),z=function(){var e,t=Object(s.f)(),n=w(),a=n.data,c=n.setValues,r=Object(S.e)({defaultValues:{email:a.email,hasPhone:a.hasPhone,phoneNumber:a.phoneNumber},mode:"onBlur",resolver:Object(D.a)(L)}),i=r.register,o=r.handleSubmit,d=r.formState.errors,u=(0,r.watch)("hasPhone",!1);return Object(j.jsxs)(O,{children:[Object(j.jsx)(l.a,{component:"h2",variant:"h5",children:"Step two\ud83d\udc17"}),Object(j.jsxs)(g,{onSubmit:o((function(e){"undefined"==typeof e.phoneNumber&&c((function(e){return Object(b.a)(Object(b.a)({},e),{},{phoneNumber:""})})),console.log(e),console.log(u),t.push("/step3"),c(e)})),children:[Object(j.jsx)(N,Object(b.a)(Object(b.a)({},i("email",{required:!0})),{},{id:"email",type:"email",label:"Email",name:"email",error:!!d.email,helperText:null===d||void 0===d||null===(e=d.email)||void 0===e?void 0:e.message,required:!0})),Object(j.jsx)("input",Object(b.a)({type:"checkbox",color:"primary"},i("hasPhone"))),"Do you have a phone?",u&&Object(j.jsx)(N,Object(b.a)(Object(b.a)({name:"phoneNumber"},i("phoneNumber")),{},{id:"phoneNumber",type:"tel",label:"Phone number",onChange:function(e){e.target.value=function(e){var t=Object(q.a)(e);return t?t.formatInternational():e}(e.target.value)}})),Object(j.jsx)(C,{children:"Next"})]})]})},A=n(154),R=n(78),B=(n(734),n(735)),I=(n(736),n(737)),W=n(96),H=n.n(W),G=(Object(d.a)((function(e){return{root:{backgroundColor:"#eee",textAlign:"center",cursor:"pointer",color:"#333",padding:"10px",marginTop:"20px"},icon:{marginTop:"16px",color:"#888",fontSize:"42px"}}})),function(){var e=Object(s.f)(),t=w(),n=t.data,c=t.setValues,r=Object(S.e)({defaultValues:{files:n.files,imgData:n.imgData}}),i=(r.register,r.control,r.handleSubmit);Object(a.useEffect)((function(){console.log(n)}),[n]),Object(a.useEffect)((function(){console.log(n)}),[]);return Object(j.jsxs)(O,{children:[Object(j.jsx)(l.a,{component:"h2",variant:"h5",children:"Step three\ud83e\udd14"}),Object(j.jsxs)(g,{onSubmit:i((function(t){console.log(t),e.push("/result")})),children:[Object(j.jsx)(A.a,{onDrop:function(e){c({files:e}),e.forEach((function(e){var t=new FileReader;t.onabort=function(){return console.log("file reading was aborted")},t.onerror=function(){return console.log("file reading has failed")},t.onload=function(){c({imgData:t.result});t.result},t.readAsDataURL(e)}))},multiple:!1,accept:"image/jpeg, image/png",maxSize:5242880,children:function(e){var t=e.getRootProps,n=e.getInputProps;return Object(j.jsx)("section",{children:Object(j.jsxs)("div",Object(b.a)(Object(b.a)({},t()),{},{children:[Object(j.jsx)("input",Object(b.a)({name:"files"},n())),Object(j.jsx)("p",{children:"Drag 'n' drop some files here, or click to select files"}),Object(j.jsx)("em",{children:"(Only *.jpeg and *.png images will be accepted)"})]}))})}}),Object(j.jsx)(H.a,{children:Object(j.jsx)(R.a,{children:n.files&&n.files.map((function(e,t){return Object(j.jsxs)(R.b,{children:[Object(j.jsx)(B.a,{children:n.imgData&&Object(j.jsx)("img",{className:"picture__preload",width:"200px",src:n.imgData})}),Object(j.jsx)(I.a,{className:"list__text",primary:e.name,secondary:e.size})]},t)}))})}),Object(j.jsx)(C,{children:"Next"})]})]})}),J=n(25),U=n.n(J),X=n(44),$=n(738),M=n(739),Y=n(741),K=n(732),Q=n(745),Z=n(743),ee=n(742),te=n(744),ne=n(740),ae=n(336),ce=n.n(ae),re=(n(649),n(102)),ie=n.n(re),oe=(n(668),Object(d.a)((function(e){return{root:{marginBottom:"30px"},table:{marginBottom:"30px"}}})));function se(e){if(!document.cookie)return null;var t=document.cookie.split(";").map((function(e){return e.trim()})).filter((function(t){return t.startsWith(e+"=")}));return 0===t.length?null:decodeURIComponent(t[0].split("=")[1])}var le=function(){var e=Object(a.useState)(!1),t=Object(P.a)(e,2),n=(t[0],t[1],Object(a.useState)([])),c=Object(P.a)(n,2),r=c[0],i=c[1],s=w().data,d=Object.entries(s).filter((function(e){return"files"!==e[0]&&"imgData"!==e[0]})),u=s.files,h=oe();Object(a.useEffect)((function(){ie()({method:"GET",url:"http://127.0.0.1:8000/api/card/"}).then((function(e){i(e.data)}))}),[]);var b=function(){var e=Object(X.a)(U.a.mark((function e(){var t,n,a;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new FormData,console.log("data"),console.log(s.files),s.files&&s.files.forEach((function(e){t.append("files",e,e.name)})),console.log("entries"),console.log(d),d.forEach((function(e){var n;"phoneNumber"===e[0]&&e[1]?t.append(e[0],null===(n=e[1])||void 0===n?void 0:n.replace(/\s/g,"")):t.append(e[0],e[1])})),console.log("formData"),console.log(t.entries()),n={},t.forEach((function(e,t){return n[t]=e})),JSON.stringify(n),a=se("csrftoken"),console.log(a),{firstName:"Daddy",lastName:"shatilov",email:"meme@corp.ru",hasPhone:!0,phoneNumber:"+79123541268"},console.log("formData"),console.log(t),e.next=19,fetch("http://127.0.0.1:8000/api/card/",{method:"POST",body:t,headers:{"X-CSRFToken":a}}).then((function(e){console.log(e.status),200==e.status&&ce.a.fire("Great job!","You've passed all data","success"),console.log(e.json())}));case 19:e.sent;case 20:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(j.jsxs)(O,{children:[Object(j.jsx)(l.a,{component:"h2",variant:"h5",children:"Form data \ud83d\udc96"}),Object(j.jsx)("ul",{children:r&&r.map((function(e){return Object(j.jsxs)("li",{children:[e.firstName,"--",e.email]},e.id)}))}),Object(j.jsxs)($.a,{children:[Object(j.jsx)(M.a,{className:h.root,component:"div",children:Object(j.jsxs)(ne.a,{className:h.table,children:[Object(j.jsx)(Y.a,{children:Object(j.jsxs)(ee.a,{children:[Object(j.jsx)(Z.a,{children:"Field"}),Object(j.jsx)(Z.a,{align:"right",children:"Value"})]})}),Object(j.jsx)(te.a,{children:d.map((function(e){var t;return Object(j.jsxs)(ee.a,{children:[Object(j.jsx)(Z.a,{children:e[0]}),Object(j.jsx)(Z.a,{align:"right",children:null===(t=e[1])||void 0===t?void 0:t.toString()})]},e[0])}))})]})}),u&&Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(l.a,{component:"h2",variant:"h5",children:"Files \ud83d\udc27"}),Object(j.jsx)(K.a,{children:u.map((function(e,t){return Object(j.jsxs)(Q.a,{children:[Object(j.jsx)(B.a,{children:s.imgData&&Object(j.jsx)("img",{className:"picture__preload",height:"60px",src:s.imgData})}),Object(j.jsx)(I.a,{style:{padding:"15px"},primary:e.name,secondary:e.size})]},t)}))})]})]}),Object(j.jsx)(C,{onClick:b,children:"Submit"}),Object(j.jsx)(o.b,{to:"/step1",children:"To the start"}),Object(j.jsx)(o.b,{to:"/",children:"Home"})]})},de=n(338),je=n.n(de),ue=n(746),he=n(337),be=n.n(he),me=(n.p,je()((function(e){return{root:{marginBottom:"30px",textAlign:"center",width:"auto",minWidth:0},table:{marginBottom:"30px"},head:{backgroundColor:"orange",color:"white"}}})));var fe=function(){var e=Object(s.f)(),t=Object(a.useState)([]),n=Object(P.a)(t,2),c=(n[0],n[1]),r=me(),i=(Object(a.useEffect)((function(){ie()({method:"GET",url:"http://127.0.0.1:8000/api/card/"}).then((function(e){var t;console.log("check response"),console.log(e),console.log(e.data),c(null!==(t=e.data)&&void 0!==t?t:[])}))}),[]),function(e){if(!document.cookie)return null;var t=document.cookie.split(";").map((function(e){return e.trim()})).filter((function(t){return t.startsWith(e+"=")}));return 0===t.length?null:decodeURIComponent(t[0].split("=")[1])}("csrftoken"));return Object(j.jsxs)(O,{children:[Object(j.jsx)(l.a,{component:"h2",variant:"h5",children:"All user cards \ud83e\udd73\ud83c\udf83"}),Object(j.jsx)($.a,{className:r.root,children:Object(j.jsx)(M.a,{className:r.root,component:"div",children:Object(j.jsxs)(ne.a,{className:r.table,children:[Object(j.jsx)(Y.a,{children:Object(j.jsxs)(ee.a,{children:[Object(j.jsx)(Z.a,{children:"Name"}),Object(j.jsx)(Z.a,{align:"right",children:"Last Name"}),Object(j.jsx)(Z.a,{children:"E-mail"}),Object(j.jsx)(Z.a,{children:"Phone"}),Object(j.jsx)(Z.a,{children:"Preview"}),Object(j.jsx)(Z.a,{children:"Delete"})]})}),Object(j.jsx)(te.a,{children:[{id:9,firstName:"Vlad",lastName:"Test",email:"shatilovvlad@mail.ru",hasPhone:!1,files:"http://127.0.0.1:8000/media/files/Vladundefined/2016-alison-brie-qhd-5120x2880.jpg",phoneNumber:"undefined",thumb:"http://127.0.0.1:8000/media/CACHE/images/files/Vladundefined/2016-alison-brie-qhd-5120x2880/99c11e751a09cdb82442baaf3697ed4a.jpg"},{id:7,firstName:"Ozon",lastName:"Pepsi",email:"shatilovvlad@mail.ru",hasPhone:!1,files:"http://127.0.0.1:8000/media/files/Ozon/1f3386d60dad.jpg",phoneNumber:"",thumb:"http://127.0.0.1:8000/media/CACHE/images/files/Ozon/1f3386d60dad/2ceb4cf57b129102ff37a2290824d2c5.jpg"},{id:2,firstName:"Vlad",lastName:"Test",email:"shatilovvlad@mail.ru",hasPhone:!0,files:"http://127.0.0.1:8000/media/files/Vlad9875168198/2fbc715a1e24e19b7c3ee8600e163eaf.jpg",phoneNumber:"79875168198",thumb:"http://127.0.0.1:8000/media/CACHE/images/files/Vlad9875168198/2fbc715a1e24e19b7c3ee8600e163eaf/e328d4048aea758b031b82491bbd6fc0.jpg"}].map((function(e){var t;return Object(j.jsxs)(ee.a,{children:[Object(j.jsx)(Z.a,{children:e.firstName}),Object(j.jsx)(Z.a,{children:e.lastName}),Object(j.jsx)(Z.a,{children:Object(j.jsx)("a",{href:"mailto:".concat(e.email),children:e.email})}),Object(j.jsx)(Z.a,{align:"right",children:Object(j.jsx)("a",{href:"tel:{p.phoneNumber?.toString()}",className:"Phonny",children:null===(t=e.phoneNumber)||void 0===t?void 0:t.toString()})}),Object(j.jsx)(Z.a,{children:Object(j.jsx)(be.a,{id:"gallery",class:"fancybox1",thumbnail:null===e||void 0===e?void 0:e.thumb,image:null===e||void 0===e?void 0:e.files})}),Object(j.jsx)(Z.a,{children:Object(j.jsx)(y.a,{type:"submit",onClick:function(){return t=e.id,void ie()({method:"DELETE",headers:{"X-CSRFToken":i},url:"http://127.0.0.1:8000/api/card/".concat(t,"/")}).then((function(e){console.log(e),ie()({method:"GET",url:"http://127.0.0.1:8000/api/card/"}).then((function(e){var t;console.log("check response"),console.log(e),console.log(e.data),c(null!==(t=e.data)&&void 0!==t?t:[])}))}));var t},className:"button__div ".concat(r.button),fullHeigth:!0,color:"secondary",startIcon:Object(j.jsx)(ue.a,{className:"button__icon",fontSize:"small"})})})]},e.id)}))})]})})}),Object(j.jsx)(g,{onClick:function(){e.push("/step1")},children:Object(j.jsx)(C,{children:"Add user card"})})]})};n(700);var pe=function(){return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(h,{}),Object(j.jsx)(o.a,{children:Object(j.jsxs)(s.c,{children:[Object(j.jsx)(s.a,{exact:!0,path:"/",component:fe}),Object(j.jsx)(s.a,{path:"/step1",component:_}),Object(j.jsx)(s.a,{path:"/step2",component:z}),Object(j.jsx)(s.a,{path:"/step3",component:G}),Object(j.jsx)(s.a,{path:"/result",component:le})]})})]})},Oe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,749)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),a(e),c(e),r(e),i(e)}))};i.a.render(Object(j.jsx)(c.a.StrictMode,{children:Object(j.jsx)(F,{children:Object(j.jsx)(pe,{})})}),document.getElementById("root")),Oe()}},[[701,1,2]]]);
//# sourceMappingURL=main.f5078703.chunk.js.map